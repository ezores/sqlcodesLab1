--SCRIPT DE CRÃ‰ATION DES TABLES

CREATE TABLE CopieFilm (
    copieId INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    filmId VARCHAR2(255) NOT NULL,
    statut VARCHAR2(15) NOT NULL CHECK (statut IN ('Prete', 'Disponible')),
    PRIMARY KEY(copieId)
);

CREATE TABLE Employe (
	matricule CHAR(7) NOT NULL,
	motDePasse VARCHAR2(50) NOT NULL,
	courriel VARCHAR2(320),
	prenom VARCHAR2(50),
	nom VARCHAR2(50),
	dateNaissance DATE,
	numeroTelephone NVARCHAR2(11),
	adresseId INTEGER,
	PRIMARY KEY(matricule)
);

CREATE TABLE Client (
	clientId INTEGER NOT NULL,
	motDePasse VARCHAR2(50) NOT NULL,
	courriel VARCHAR2(320),
	prenom VARCHAR2(50),
	nom VARCHAR2(50),
	dateNaissance DATE,
	numeroTelephone NVARCHAR2(13),
	adresseId INTEGER,
	carteCreditId CHAR(16),
	codeAbonnement CHAR(1),
	PRIMARY KEY(clientId)
);


CREATE TABLE Adresse (
	adresseId INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	rue VARCHAR2(255),
	ville VARCHAR2(255),
	province VARCHAR2(255),
	codePostal CHAR(7)
	paysId INTEGER,
	PRIMARY KEY(adresseId)
);


CREATE TABLE Personne (
	personneId INTEGER NOT NULL,
	nom VARCHAR2(100),
	dateNaissance DATE,
	lieuNaissance VARCHAR2(100),
	photo VARCHAR2(2048),
	biographie CLOB,
	PRIMARY KEY(personneId)
);


CREATE TABLE Emprunt (
	copieId INTEGER NOT NULL,
	nomUsager VARCHAR2(50) NOT NULL,
	dateDebutEmprunt DATE NOT NULL,
	PRIMARY KEY(copieId, nomUsager)
);

CREATE TABLE Pays (
	paysId INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	nom VARCHAR2(255),
	PRIMARY KEY(paysId)
);


CREATE TABLE PaysFilm (
	paysId INTEGER NOT NULL,
	filmId INTEGER NOT NULL,
	PRIMARY KEY(paysId, filmId)
);

CREATE TABLE ActeurFilm (
	acteurId INTEGER NOT NULL,
	filmId INTEGER NOT NULL,
	personnage VARCHAR2(100),
	PRIMARY KEY(acteurId, filmId)
);

CREATE TABLE Scenariste (
	scenaristeId INTEGER NOT NULL,
	nom VARCHAR2(50),
	PRIMARY KEY(scenaristeId)
);

CREATE TABLE ScenaristeFilm (
	scenaristeId INTEGER NOT NULL,
	filmId INTEGER NOT NULL,
	PRIMARY KEY(scenaristeId, filmId)
);

CREATE TABLE CarteCredit (
	carteCreditId INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	numero CHAR(19) NOT NULL,
	dateExpiration DATE NOT NULL,
	CVV CHAR(3),
	PRIMARY KEY(carteCreditId)
);

CREATE TABLE Abonnement (
	code CHAR(1) NOT NULL,
	forfait VARCHAR2(14),
	coutMensuel BINARY_FLOAT,
	empruntMax INTEGER,
	dureeMax INTEGER,
	PRIMARY KEY(code)
);

CREATE TABLE Film (
	filmId INTEGER NOT NULL,
	titre VARCHAR2(255),
	anneeSortie INTEGER,
	langueOriginale VARCHAR2(50),
	dureeMinute INTEGER,
	resume VARCHAR2(2083),
	afficheUrl VARCHAR2(2083),
	realisateurId INTEGER,
	PRIMARY KEY(filmId)
);

CREATE TABLE GenreFilm (
	genre VARCHAR2(50),
	filmId INTEGER NOT NULL,
	PRIMARY KEY(genre, filmId)
);

CREATE TABLE BandeAnnonce (
	bandeAnnonceId INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	filmId INTEGER NOT NULL,
	URL VARCHAR(2048),
	PRIMARY KEY(bandeAnnonceId)
);



